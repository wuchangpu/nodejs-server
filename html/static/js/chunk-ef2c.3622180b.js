(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ef2c"],{"12cn":function(e,t,s){"use strict";var a=s("AOYU");s.n(a).a},AOYU:function(e,t,s){},WqOn:function(e,t,s){"use strict";var a=s("hVMO");s.n(a).a},ghw1:function(e,t,s){},hVMO:function(e,t,s){},hZPY:function(e,t,s){"use strict";s.r(t);var a=s("6ZY3"),r=s.n(a),o=s("omC7"),i=s.n(o),n=s("EPZ6"),l=s.n(n),c=s("cLjf"),u=s.n(c),m=s("hDQ3"),p=s.n(m),d=(s("8t5x"),s("8SHQ")),f={name:"commit-record-list",data:function(){return{Host:d.a,form:{paperRuleId:this.$route.query.id,userName:"",orgName:"",pageNumber:1,pageSize:20},tableData:[],total:0,admissionsTeamList:[],showSearch:!0,exportIdList:[]}},created:function(){this.getTableData()},methods:{getTableData:function(){var e=this;return p()(u.a.mark(function t(){var s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("examHistoryGradePageHistoryUserGradeByRuleId",e.form);case 2:"1000"===(s=t.sent).returnCode?(e.tableData=s.records,e.total=+s.total):e.$message.error(s.message);case 4:case"end":return t.stop()}},t,e)}))()},getAdmissionsTeamList:function(){var e=this;return p()(u.a.mark(function t(){var s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("adminssionGroupList",e.admissionsTeamParams);case 2:"1000"===(s=t.sent).returnCode?e.admissionsTeamList=s.dataInfo:e.$message.error(s.message);case 4:case"end":return t.stop()}},t,e)}))()},search:function(){this.form.pageNumber=1,this.getTableData()},paginationChange:function(e){this.form.pageNumber=e.page,this.form.pageSize=e.limit,this.getTableData()},handleSelectionChange:function(e){this.exportIdList=e.map(function(e){return e.id})}}},h=(s("WqOn"),s("ZrdR")),v=Object(h.a)(f,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exam_records"},[s("div",{staticClass:"exam_records_wrapper"},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"form",attrs:{model:e.form,"label-width":"150px"}},[s("el-row",{staticClass:"exam_records_form_row"},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"姓名：","label-width":"70px"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"所在招生组："}},[s("el-input",{attrs:{placeholder:"请输入名称模糊搜索"},model:{value:e.form.orgName,callback:function(t){e.$set(e.form,"orgName",t)},expression:"form.orgName"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{"label-width":"20px"}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("搜索")])],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"table_container"},[s("div",{staticClass:"btn_container"},[s("a",{attrs:{href:e.Host+"examHistoryGrade/export?paperRuleId="+e.$route.query.id+"&userName="+e.form.userName+"&orgId="+e.form.orgId+"&idList="+e.exportIdList,target:"_blank"}},[s("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("批量导出")])],1),e._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showSearch=!e.showSearch}}},[e._v(e._s(e.showSearch?"收起搜索":"展开搜索"))])],1),e._v(" "),s("el-table",{ref:"roleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection"}}),e._v(" "),s("el-table-column",{attrs:{label:"姓名",prop:"userName"}}),e._v(" "),s("el-table-column",{attrs:{label:"工号",prop:"jobNumber"}}),e._v(" "),s("el-table-column",{attrs:{label:"所在招生组",prop:"orgName"}}),e._v(" "),s("el-table-column",{attrs:{label:"角色",prop:"role"}}),e._v(" "),s("el-table-column",{attrs:{label:"联系方式",prop:"mobile"}}),e._v(" "),s("el-table-column",{attrs:{label:"得分",prop:"score"}}),e._v(" "),s("el-table-column",{attrs:{label:"考试时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterTime")(t.row.createdTime,"YYYY-MM-DD hh:mm")))]}}])})],1)],1),e._v(" "),s("div",{staticClass:"pagination"},[s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.form.pageNumber,limit:e.form.pageSize},on:{"update:page":function(t){e.$set(e.form,"pageNumber",t)},"update:limit":function(t){e.$set(e.form,"pageSize",t)},pagination:e.paginationChange}})],1)],1)])},[],!1,null,"0414bada",null);v.options.__file="examRecords.vue";var b={components:{examRecords:v.exports},data:function(){var e=this,t=function(t,s,a){s?e.$reg.positiveInteger.test(s)?a():a(new Error("请输入正整数")):a(new Error("请输入"))};return{form:{title:"",paperType:"",examTime:"",quesNumber:"",passScore:"",settingJson:[{classifyId:"",quesNum:"",scoreRate:""}],personType:"",personJson:"",status:""},positiveInteger:t,percentage:function(t,s,a){s?e.$reg.percentage.test(s)?a():a(new Error("请输入0-100之间的数字，小数点后最多2位")):a(new Error("请输入"))},rules:{title:[{required:!0,message:"请输入标题",trigger:"change"}],paperType:[{required:!0,message:"请选择分类",trigger:"change"}],examTime:[{required:!0,message:"请输入考试时间",trigger:"change"},{validator:t,trigger:"blur"}],quesNumber:[{required:!0,message:"请输入题数",trigger:"change"},{validator:t,trigger:"blur"}],passScore:[{required:!0,message:"请输入标准分数",trigger:"change"},{validator:t,trigger:"blur"}],personType:[{required:!0,message:"请选择考试对象",trigger:"change"}]},whichOperate:"",questionsBank:[],showDetailTable:!1}},computed:{disabled:function(){return"detail"===this.whichOperate}},created:function(){this.getWhich(),this.getQuestionsBank(),"add"!==this.whichOperate&&this.getDetail()},methods:{getWhich:function(){var e=this.$route.path.split("/");this.whichOperate=e[e.length-1]},getDetail:function(){var e=this;return p()(u.a.mark(function t(){var s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("examPaperRuleSelectById",{id:e.$route.query.id});case 2:"1000"===(s=t.sent).returnCode?e.echoDetail(s.dataInfo):e.$message.error(s.message);case 4:case"end":return t.stop()}},t,e)}))()},getQuestionNum:function(e){var t=this.questionsBank.find(function(t){return t.id===e});if(t)return t.quesNum},radioClick:function(e,t){this.form.personType!==t&&this.$refs.person.clearCheckbox()},echoDetail:function(e){var t=this;e.settingJson=JSON.parse(e.settingJson),e.settingJson.forEach(function(e){e.scoreRate=100*e.scoreRate}),e.personJson&&(e.personJson=JSON.parse(e.personJson)),l()(this.form).forEach(function(s){t.form[s]=e[s]})},submitForm:function(e,t){var s=this;this.$refs[e].validate(function(e){if(!e)return s.$message.error("有信息未填写"),!1;s.form.personJson||"1"===s.form.personType?s.operateData(t):s.$message.error("考试对象人员未勾选")})},operateData:function(e){var t=this.$deepCopy(this.form);t.status=e,"1"===t.personType?t.personJson="":t.personJson=i()(t.personJson),t.settingJson.forEach(function(e){e.scoreRate=e.scoreRate/100}),t.settingJson=i()(t.settingJson),this.save(t,e)},save:function(e,t){var s=this;return p()(u.a.mark(function a(){var o,i;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.$post("examPaperRuleSave",r()({},e,{id:s.$route.query.id}));case 2:"1000"===(o=a.sent).returnCode?(i="1"===t?"暂存成功":"2"===t?"发布成功":"",s.$message.success(i),s.$router.go(-1)):s.$message.error(o.message);case 4:case"end":return a.stop()}},a,s)}))()},getQuestionsBank:function(){var e=this;return p()(u.a.mark(function t(){var s,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=2,"detail"===e.whichOperate&&(s=""),t.next=4,e.$post("examClassifyQueryPage",{status:s});case 4:"1000"===(a=t.sent).returnCode?e.questionsBank=a.records:e.$message.error(a.message);case 6:case"end":return t.stop()}},t,e)}))()},addQuestionSetting:function(){this.form.settingJson.push({classifyId:"",quesNum:""})},delQuestionsSetting:function(e){this.form.settingJson.splice(e,1)},showStatus:function(e,t){if(this.questionsBank.length){var s=this.questionsBank.find(function(t){return t.id===e});return!!s&&s.status===t}}}},g=(s("yRKe"),s("12cn"),Object(h.a)(b,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exam_questions_save"},[s("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"inline-message":!0,rules:e.rules,"label-width":"120px"}},[s("el-row",[s("el-col",{attrs:{span:7}},[s("el-form-item",{attrs:{label:"标题：",prop:"title"}},[s("el-input",{attrs:{placeholder:"请输入",disabled:e.disabled},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:7}},[s("el-form-item",{attrs:{label:"分类：","label-width":"150px",prop:"paperType"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",disabled:e.disabled},model:{value:e.form.paperType,callback:function(t){e.$set(e.form,"paperType",t)},expression:"form.paperType"}},[s("el-option",{attrs:{label:"基础政策",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"技巧考核",value:"2"}})],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:7}},[s("el-form-item",{attrs:{label:"考试时间（min)：","label-width":"150px",prop:"examTime"}},[s("el-input",{attrs:{placeholder:"请输入",disabled:e.disabled},model:{value:e.form.examTime,callback:function(t){e.$set(e.form,"examTime",t)},expression:"form.examTime"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:7}},[s("el-form-item",{attrs:{label:"题数（题）：",prop:"quesNumber"}},[s("el-input",{attrs:{placeholder:"请输入",disabled:e.disabled},model:{value:e.form.quesNumber,callback:function(t){e.$set(e.form,"quesNumber",t)},expression:"form.quesNumber"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:7}},[s("el-form-item",{attrs:{label:"通过标准（分）：","label-width":"150px",prop:"passScore"}},[s("el-input",{attrs:{placeholder:"请输入",disabled:e.disabled},model:{value:e.form.passScore,callback:function(t){e.$set(e.form,"passScore",t)},expression:"form.passScore"}})],1)],1)],1),e._v(" "),s("el-row",{staticClass:"question_set_title"},[s("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 出题设置：\n    ")]),e._v(" "),e._l(e.form.settingJson,function(t,a){return s("el-row",{key:a,staticClass:"question_set_row"},[s("el-col",{attrs:{lg:4,xl:3}},[s("el-form-item",{attrs:{prop:"settingJson."+a+".classifyId",rules:{required:!0,message:"请选择"},"label-width":"20px"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择题库",clearable:"",filterable:"",disabled:e.disabled},model:{value:t.classifyId,callback:function(s){e.$set(t,"classifyId",s)},expression:"v.classifyId"}},e._l(e.questionsBank,function(e,t){return s("el-option",{key:e.id+t,attrs:{label:e.childName,value:e.id}})}))],1)],1),e._v(" "),s("el-col",{attrs:{lg:2,xl:1}},[s("el-form-item",{staticStyle:{"text-align":"center"},attrs:{"label-width":"0"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.getQuestionNum(t.classifyId),expression:"getQuestionNum(v.classifyId)"}]},[e._v("\n            共"+e._s(e.getQuestionNum(t.classifyId))+"题\n          ")])])],1),e._v(" "),s("el-col",{attrs:{lg:4,xl:3}},[s("el-form-item",{attrs:{prop:"settingJson."+a+".quesNum",rules:[{required:!0,message:"请输入"},{validator:e.positiveInteger,trigger:"blur"}],"label-width":"0"}},[s("el-input",{attrs:{placeholder:"请输入抽题数量",disabled:e.disabled},model:{value:t.quesNum,callback:function(s){e.$set(t,"quesNum",s)},expression:"v.quesNum"}})],1)],1),e._v(" "),s("el-col",{attrs:{lg:5,xl:3}},[s("el-form-item",{attrs:{prop:"settingJson."+a+".scoreRate",rules:[{required:!0,message:"请输入"},{validator:e.percentage,trigger:"blur"}],"label-width":"10px"}},[s("el-input",{attrs:{placeholder:"请输入分数权重",disabled:e.disabled},model:{value:t.scoreRate,callback:function(s){e.$set(t,"scoreRate",s)},expression:"v.scoreRate"}},[s("span",{attrs:{slot:"append"},slot:"append"},[e._v("%")])])],1)],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:e.form.settingJson.length>1&&!e.disabled,expression:"form.settingJson.length > 1 && !disabled"}],attrs:{lg:3,xl:2}},[s("el-form-item",{attrs:{"label-width":"10px"}},[s("i",{staticClass:"el-icon-remove-outline remove_icon",on:{click:function(t){e.delQuestionsSetting(a)}}})])],1),e._v(" "),s("el-col",{directives:[{name:"show",rawName:"v-show",value:e.disabled,expression:"disabled"}],attrs:{lg:3,xl:2}},[s("el-form-item",{attrs:{"label-width":"10px"}},[s("i",{directives:[{name:"show",rawName:"v-show",value:e.showStatus(t.id,"2"),expression:"showStatus(v.id, '2')"}],staticClass:"el-icon-success",staticStyle:{color:"#007efc"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.showStatus(t.id,"3"),expression:"showStatus(v.id, '3')"}],staticStyle:{color:"red"}},[e._v("失效题库")])])],1)],1)}),e._v(" "),s("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}]},[s("el-col",{attrs:{lg:15,xl:10}},[s("el-form-item",{attrs:{"label-width":"20px"}},[s("el-button",{staticStyle:{width:"100%"},attrs:{size:"medium"},on:{click:e.addQuestionSetting}},[s("i",{staticClass:"el-icon-plus"}),e._v(" 添加抽题题库\n          ")])],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"考试对象：",prop:"personType"}},[s("el-radio-group",{attrs:{disabled:e.disabled},model:{value:e.form.personType,callback:function(t){e.$set(e.form,"personType",t)},expression:"form.personType"}},[s("el-radio",{attrs:{label:"1"},nativeOn:{click:function(t){e.radioClick(t,"1")}}},[e._v("全部成员")]),e._v(" "),s("el-radio",{attrs:{label:"2"},nativeOn:{click:function(t){e.radioClick(t,"2")}}},[e._v("指定招生组")]),e._v(" "),s("el-radio",{attrs:{label:"3"},nativeOn:{click:function(t){e.radioClick(t,"3")}}},[e._v("指定角色")]),e._v(" "),s("el-radio",{attrs:{label:"4"},nativeOn:{click:function(t){e.radioClick(t,"4")}}},[e._v("自定义成员")])],1)],1)],1)],1),e._v(" "),s("specified-object",{ref:"person",attrs:{type:e.form.personType,disabled:e.disabled},model:{value:e.form.personJson,callback:function(t){e.$set(e.form,"personJson",t)},expression:"form.personJson"}})],2),e._v(" "),s("el-row",{directives:[{name:"show",rawName:"v-show",value:e.disabled,expression:"disabled"}],staticClass:"exam_records_container"},[s("el-col",{attrs:{span:21}},[s("el-row",{staticStyle:{"padding-left":"20px"}},[e._v("\n        考试记录：\n        "),s("i",{directives:[{name:"show",rawName:"v-show",value:!e.showDetailTable,expression:"!showDetailTable"}],staticClass:"el-icon-caret-bottom",on:{click:function(t){e.showDetailTable=!e.showDetailTable}}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.showDetailTable,expression:"showDetailTable"}],staticClass:"el-icon-caret-top",on:{click:function(t){e.showDetailTable=!e.showDetailTable}}})]),e._v(" "),"detail"===e.whichOperate?s("el-row",[s("exam-records",{directives:[{name:"show",rawName:"v-show",value:e.showDetailTable,expression:"showDetailTable"}]})],1):e._e()],1)],1),e._v(" "),s("div",{staticClass:"btn_container"},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],attrs:{type:"primary",size:"mini"},on:{click:function(t){e.submitForm("form","2")}}},[e._v("发布")]),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.disabled,expression:"!disabled"}],attrs:{type:"primary",size:"mini"},on:{click:function(t){e.submitForm("form","1")}}},[e._v("暂存")]),e._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")])],1)],1)},[],!1,null,"06739c56",null));g.options.__file="save.vue";t.default=g.exports},yRKe:function(e,t,s){"use strict";var a=s("ghw1");s.n(a).a}}]);