(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a356"],{"/SVU":function(e,t,a){"use strict";var s=a("JDnA");a.n(s).a},"0NNe":function(e,t,a){"use strict";a.r(t);var s=a("6ZY3"),r=a.n(s),l=a("cLjf"),o=a.n(l),n=a("hDQ3"),i=a.n(n),c=(a("8t5x"),a("8SHQ")),u={data:function(){return{Host:c.a,form:{summarizeId:this.$route.query.id,title:"",classify:"",username:"",status:"",orgName:"",shareStatus:"",pageNumber:1,pageSize:20},tableData:[],total:0,roleList:[],batchDelIds:[],curClickItemIndex:-1,admissionsTeamList:[],dialogTitle:"",centerDialogVisible:!1,addForm:{id:"",shareObject:""},rules:{shareObject:[{required:!0,message:"请指定提交对象",trigger:"change"}]},shareObject:[{dataKey:"0",dataValue:"全部成员"},{dataKey:"1",dataValue:"一级组长"},{dataKey:"2",dataValue:"二级组长"},{dataKey:"3",dataValue:"招生干部"}]}},created:function(){this.getTableData(),this.getAdmissionsTeamList()},methods:{getTableData:function(){var e=this;return i()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("userSummarizePage",e.form);case 2:"1000"===(a=t.sent).returnCode?(e.tableData=a.records,e.total=+a.total):e.$message.error(a.message);case 4:case"end":return t.stop()}},t,e)}))()},getAdmissionsTeamList:function(){var e=this;return i()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("adminssionGroupList",e.admissionsTeamParams);case 2:"1000"===(a=t.sent).returnCode?e.admissionsTeamList=a.dataInfo:e.$message.error(a.message);case 4:case"end":return t.stop()}},t,e)}))()},search:function(){this.form.pageNumber=1,this.getTableData()},paginationChange:function(e){this.form.pageNumber=e.page,this.form.pageSize=e.limit,this.getTableData()},handleSelectionChange:function(e){this.batchDelIds=e.map(function(e){return e.id})},batchDelete:function(){var e=this;if(!this.batchDelIds.length)return this.$message.warning("请选择删除项");this.$confirm("此操作将删除所选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteRequest(e.batchDelIds)}).catch(function(){})},delTableItem:function(e){var t=this;this.curClickItemIndex=e.$index,this.$confirm("此操作将删除 “"+e.row.username+"” 的总结, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteRequest([e.row.id])}).catch(function(){})},deleteRequest:function(e){var t=this;return i()(o.a.mark(function a(){var s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$post("userSummarizeDelete",{ids:e});case 2:"1000"===(s=a.sent).returnCode?(t.$message.success("删除成功"),t.getTableData()):t.$message.error(s.message);case 4:case"end":return a.stop()}},a,t)}))()},singleDownload:function(e){var t=this;return i()(o.a.mark(function a(){var s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$get("userSummarizeCreateExcel","id="+e.row.id);case 2:"1000"===(s=a.sent).returnCode?window.location.href=c.a+"file/download?filePath="+s.dataInfo+"&fileName="+e.row.username+"的总结.zip":t.$message.error(s.message);case 4:case"end":return a.stop()}},a,t)}))()},batchDownload:function(){var e=this;return i()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("userSummarizeBatchDownLoad",r()({},e.form,{ids:e.batchDelIds}));case 2:"1000"===(a=t.sent).returnCode?window.location.href=c.a+"file/download?filePath="+a.dataInfo+"&fileName="+e.$route.query.title+".zip":e.$message.error(a.message);case 4:case"end":return t.stop()}},t,e)}))()},switchClick:function(e,t){this.tableData[t.$index].shareStatus="1"===t.row.shareStatus?"2":"2"===t.row.shareStatus?"1":"",this.addForm.id=t.row.id,"1"===t.row.shareStatus?this.changeSwitchStatus(!0):(this.addForm.shareObject=t.row.shareObject,this.curClickItemIndex=t.$index,this.dialogTitle="分享",this.centerDialogVisible=!0)},changeSwitchStatus:function(e){var t=this;return i()(o.a.mark(function a(){var s,l;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s={},e&&(s.shareObject=""),a.next=4,t.$post("userSummarizeAssignShareObject",r()({},t.addForm,s));case 4:"1000"===(l=a.sent).returnCode?(t.getTableData(),t.centerDialogVisible=!1,t.$message.success("操作成功")):t.$message.error(l.message);case 6:case"end":return a.stop()}},a,t)}))()},closeDialog:function(e){this.centerDialogVisible=!1,this.$refs[e].clearValidate()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.changeSwitchStatus()})}}},m=(a("/SVU"),a("ZrdR")),d=Object(m.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"single_records_list"},[a("div",{staticClass:"single_records_list_wrapper"},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"标题："}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型：","label-width":"80px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.classify,callback:function(t){e.$set(e.form,"classify",t)},expression:"form.classify"}},[a("el-option",{attrs:{label:"招生总结",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"总结案例",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"作者："}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"状态：","label-width":"80px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"可分享",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"不可分享",value:"2"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"所在招生组："}},[a("el-input",{attrs:{placeholder:"请输入名称模糊搜索"},model:{value:e.form.orgName,callback:function(t){e.$set(e.form,"orgName",t)},expression:"form.orgName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"分享：","label-width":"80px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.shareStatus,callback:function(t){e.$set(e.form,"shareStatus",t)},expression:"form.shareStatus"}},[a("el-option",{attrs:{label:"已分享",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未分享",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"提交时间："}},[a("el-col",{attrs:{span:11}},[a("date-picker",{attrs:{fullWidth:""},model:{value:e.form.timeBegin,callback:function(t){e.$set(e.form,"timeBegin",t)},expression:"form.timeBegin"}})],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("date-picker",{attrs:{fullWidth:"",end:""},model:{value:e.form.timeEnd,callback:function(t){e.$set(e.form,"timeEnd",t)},expression:"form.timeEnd"}})],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"search_button_row"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回总结提交记录")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),a("div",{staticClass:"table_container"},[a("div",{staticClass:"btn_container"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.batchDownload}},[e._v("批量下载")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.batchDelete}},[e._v("批量删除")])],1),e._v(" "),a("h3",{staticClass:"table_title"},[e._v(e._s(e.$route.query.title))]),e._v(" "),a("el-table",{ref:"roleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"标题","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/summary/commitRecords/summaryDetail",query:{id:t.row.id}}}},[e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s("1"===t.row.classify?"招生总结":"2"===t.row.classify?"典型案例":"")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"提交时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterTime")(t.row.updatedTime,"YYYY-MM-DD hh:mm")))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"所在招生组"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s("1"===t.row.status?"可分享":"2"===t.row.status?"不可分享":"")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"分享",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.status?a("el-switch",{staticStyle:{display:"block"},attrs:{"active-value":"1","inactive-value":"2","inactive-color":"#ccc"},nativeOn:{click:function(a){e.switchClick(a,t)}},model:{value:t.row.shareStatus,callback:function(a){e.$set(t.row,"shareStatus",a)},expression:"scope.row.shareStatus"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"edit_item",on:{click:function(a){e.singleDownload(t)}}},[e._v("下载")]),e._v(" "),a("span",{staticClass:"del_item",on:{click:function(a){e.delTableItem(t)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.form.pageNumber,limit:e.form.pageSize},on:{"update:page":function(t){e.$set(e.form,"pageNumber",t)},"update:limit":function(t){e.$set(e.form,"pageSize",t)},pagination:e.paginationChange}})],1),e._v(" "),a("div",{staticClass:"dialog_container"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.centerDialogVisible,center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"150px"}},[a("el-row",[a("el-col",{attrs:{span:21}},[a("el-form-item",{attrs:{label:"指定提交对象：",prop:"shareObject"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.addForm.shareObject,callback:function(t){e.$set(e.addForm,"shareObject",t)},expression:"addForm.shareObject"}},e._l(e.shareObject,function(e){return a("el-option",{key:e.dataKey,attrs:{label:e.dataValue,value:e.dataKey}})}))],1)],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.closeDialog("addForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("addForm")}}},[e._v("确 定")])],1)],1)],1)],1)])},[],!1,null,"696b4120",null);d.options.__file="singleRecords.vue";t.default=d.exports},JDnA:function(e,t,a){}}]);