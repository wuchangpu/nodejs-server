(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3192"],{Qg78:function(e,t,r){"use strict";var s=r("n2hE");r.n(s).a},k16Q:function(e,t,r){"use strict";r.r(t);var s=r("6ZY3"),a=r.n(s),o=r("EPZ6"),n=r.n(o),i=r("cLjf"),l=r.n(i),c=r("hDQ3"),u=r.n(c),d={data:function(){return{form:{roleName:"",status:"",remark:"",menuIdList:[]},treeData:[],rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},whichOperate:"",disabled:!1}},computed:{},created:function(){this.getWhich(),this.getTreeData(),this.disabled="detail"===this.whichOperate,"add"!==this.whichOperate&&this.getRolePermission()},methods:{getWhich:function(){var e=this.$route.path.split("/");this.whichOperate=e[e.length-1]},disabledTree:function(e){var t=this;e.forEach(function(e){e.disabled=!0,e.list&&t.disabledTree(e.list)})},getTreeData:function(){var e=this;return u()(l.a.mark(function t(){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("sysMenuSelect",{});case 2:"1000"===(r=t.sent).returnCode?(e.treeData=r.dataInfo,"detail"===e.whichOperate&&e.disabledTree(e.treeData)):e.$message.error(r.message);case 4:case"end":return t.stop()}},t,e)}))()},getRolePermission:function(){var e=this;return u()(l.a.mark(function t(){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("sysRoleInfo",{roleId:e.$route.query.id});case 2:"1000"===(r=t.sent).returnCode?n()(e.form).forEach(function(t){e.form[t]=r.dataInfo[t]}):e.$message.error(r.message);case 4:case"end":return t.stop()}},t,e)}))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){return e?t.form.menuIdList.length?void("add"===t.whichOperate?t.addRole():"edit"===t.whichOperate&&t.editRole()):t.$message.error("至少选择一个权限"):(t.$message.error("有信息未填写"),!1)})},addRole:function(){var e=this;return u()(l.a.mark(function t(){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("sysRoleSave",e.form);case 2:"1000"===(r=t.sent).returnCode?(e.$message.success("新增成功"),e.$router.go(-1)):e.$message.error(r.message);case 4:case"end":return t.stop()}},t,e)}))()},editRole:function(){var e=this;return u()(l.a.mark(function t(){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("sysRoleUpdate",a()({},e.form,{roleId:e.$route.query.id}));case 2:"1000"===(r=t.sent).returnCode?(e.$message.success("修改成功"),e.$router.go(-1)):e.$message.error(r.message);case 4:case"end":return t.stop()}},t,e)}))()}}},m=(r("Qg78"),r("ZrdR")),f=Object(m.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"permission_add_role"},[r("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"inline-message":!0,rules:e.rules,"label-width":"120px"}},[r("el-row",[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"角色：","label-width":"80px",prop:"roleName"}},[r("el-input",{attrs:{placeholder:"请输入",disabled:e.disabled},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8,offset:3}},[r("el-form-item",{attrs:{label:"状态：","label-width":"80px",prop:"status"}},[r("el-radio-group",{attrs:{size:"mini",disabled:e.disabled},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),r("el-radio",{attrs:{label:"2"}},[e._v("禁用")])],1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:16}},[r("el-form-item",{attrs:{label:"备注：","label-width":"80px"}},[r("el-input",{attrs:{placeholder:"请输入",disabled:e.disabled},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"tree-contianer"},[r("p",[e._v("操作权限")]),e._v(" "),r("div",{staticClass:"tree"},[r("permission-tree",{attrs:{treeData:e.treeData,checkedKeys:e.form.menuIdList},on:{"update:checkedKeys":function(t){e.$set(e.form,"menuIdList",t)}}})],1)]),e._v(" "),r("div",{staticClass:"btn-container"},[e.disabled?e._e():r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.submitForm("form")}}},[e._v("确定")]),e._v(" "),r("el-button",{attrs:{size:"mini"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")])],1)],1)},[],!1,null,"270ba668",null);f.options.__file="roleDetail.vue";t.default=f.exports},n2hE:function(e,t,r){}}]);