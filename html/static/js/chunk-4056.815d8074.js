(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4056"],{TzNj:function(e,t,a){},"c+5/":function(e,t,a){"use strict";var s=a("TzNj");a.n(s).a},yQCW:function(e,t,a){"use strict";a.r(t);var s=a("cLjf"),l=a.n(s),o=a("hDQ3"),r=a.n(o),n={data:function(){return{form:{roleName:"",status:"",timeBegin:"",timeEnd:"",pageNumber:1,pageSize:20},tableData:[],total:0,roleList:[],batchDelIds:[]}},created:function(){this.getTableData()},methods:{changeRoleStatus:function(e,t){var a=this;return r()(l.a.mark(function s(){var o;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.$post("sysRoleIsEnable",{roleId:t.row.roleId});case 2:"1000"===(o=s.sent).returnCode?a.$message.success("“"+t.row.roleName+"”状态已"+("1"===e?"启用":"2"===e?"禁用":"")):(a.tableData[t.$index].status="1"===e?"2":"2"===e?"1":"",a.$message.error(o.message));case 4:case"end":return s.stop()}},s,a)}))()},getTableData:function(){var e=this;return r()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("sysRoleList",e.form);case 2:"1000"===(a=t.sent).returnCode?(e.tableData=a.records,e.total=+a.total):e.$message.error(a.message);case 4:case"end":return t.stop()}},t,e)}))()},search:function(){this.form.pageNumber=1,this.getTableData()},editTableItem:function(e){this.$router.push({path:"/permission/roles/edit",query:{id:e.row.roleId}})},toAddRole:function(){this.$router.push("/permission/roles/add")},toRoleDetail:function(e){this.$router.push({path:"/permission/roles/detail",query:{id:e.row.roleId}})},handleSelectionChange:function(e){var t=[];e.forEach(function(e){t.push(e.roleId)}),this.batchDelIds=t},batchDel:function(){this.delRole(this.batchDelIds)},delTableItem:function(e){this.delRole([e.row.roleId])},delRole:function(e){var t=this;return r()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$post("sysRoleDelete",{roleIds:e});case 2:"1000"===(s=a.sent).returnCode?(t.$message.success("删除成功"),t.tableData=t.tableData.filter(function(t){return!e.includes(t.roleId)})):t.$message.error(s.message);case 4:case"end":return a.stop()}},a,t)}))()},paginationChange:function(e){this.form.pageNumber=e.page,this.form.pageSize=e.limit,this.getTableData()}}},i=(a("c+5/"),a("ZrdR")),c=Object(i.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"permission_roles"},[a("div",{staticClass:"roles_wrapper"},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"角色：","label-width":"80px"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"状态：","label-width":"80px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"更新时间："}},[a("el-col",{attrs:{span:11}},[a("date-picker",{attrs:{fullWidth:""},model:{value:e.form.timeBegin,callback:function(t){e.$set(e.form,"timeBegin",t)},expression:"form.timeBegin"}})],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("date-picker",{attrs:{fullWidth:"",end:""},model:{value:e.form.timeEnd,callback:function(t){e.$set(e.form,"timeEnd",t)},expression:"form.timeEnd"}})],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"search_button_row"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),a("div",{staticClass:"roles_container"},[a("div",{staticClass:"btn_container"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.toAddRole}},[e._v("新增角色")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.batchDel}},[e._v("批量删除")])],1),e._v(" "),a("el-table",{ref:"roleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"role_name",on:{click:function(a){e.toRoleDetail(t)}}},[e._v(e._s(t.row.roleName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-value":"1","inactive-value":"2","inactive-color":"#ccc","active-text":"启用","inactive-text":"禁用"},on:{change:function(a){e.changeRoleStatus(a,t)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterTime")(t.row.updatedTime,"YYYY-MM-DD hh:mm")))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"edit_item",on:{click:function(a){e.editTableItem(t)}}},[e._v("编辑")]),e._v(" "),a("span",{staticClass:"del_item",on:{click:function(a){e.delTableItem(t)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.form.pageNumber,limit:e.form.pageSize},on:{"update:page":function(t){e.$set(e.form,"pageNumber",t)},"update:limit":function(t){e.$set(e.form,"pageSize",t)},pagination:e.paginationChange}})],1)],1)])},[],!1,null,"1133e158",null);c.options.__file="list.vue";t.default=c.exports}}]);