(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1e4f"],{"3KyF":function(t,e,a){"use strict";var i=a("VUoB");a.n(i).a},VUoB:function(t,e,a){},eofc:function(t,e,a){"use strict";a.r(e);var i=a("cLjf"),n=a.n(i),r=a("hDQ3"),o=a.n(r),s=a("bS4n"),l=a.n(s),c=a("8t5x"),u={name:"study-datum-list",data:function(){return{form:{mainTitle:"",publishState:"",staUpdatedTime:"",endUpdatedTime:"",pageNumber:1,pageSize:20},tableData:[],total:0,batchDelIds:[],addForm:{jobNumber:"",username:"",idCard:"",mobile:"",roleIdList:[]},curClickItemIndex:-1}},computed:l()({},Object(c.b)(["userInfo"])),created:function(){this.getTableData()},methods:{getTableData:function(){var t=this;return o()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$post("studyDataAdminStudyDataPage",t.form);case 2:"1000"===(a=e.sent).returnCode?(t.tableData=a.records,t.total=+a.total):t.$message.error(a.message);case 4:case"end":return e.stop()}},e,t)}))()},search:function(){this.form.pageNumber=1,this.getTableData()},paginationChange:function(t){this.form.pageNumber=t.page,this.form.pageSize=t.limit,this.getTableData()},editTableItem:function(t){"文件"===t.row.fileFormat?this.$router.push({path:"/exam/studyDatum/fileEdit",query:{id:t.row.id}}):this.$router.push({path:"/exam/studyDatum/audioEdit",query:{id:t.row.id}})},delTableItem:function(t){var e=this;this.curClickItemIndex=t.$index,this.$confirm("此操作将删除 “"+t.row.mainTitle+"” , 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.delRequest([t.row.id])}).catch(function(){})},delRequest:function(t){var e=this;return o()(n.a.mark(function a(){var i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$post("studyDataToTopOrDeleteList",{serverType:"2",topOrDel:"2",idList:t});case 2:"1000"===(i=a.sent).returnCode?(e.$message.success("删除成功"),e.getTableData()):e.$message.error(i.message);case 4:case"end":return a.stop()}},a,e)}))()},handleSelectionChange:function(t){this.batchDelIds=t.map(function(t){return t.id})},batchDelete:function(){var t=this;if(!this.batchDelIds.length)return this.$message.warning("请选择删除项");this.$confirm("确定删除这些文件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delRequest(t.batchDelIds)}).catch(function(){})},changeToppingSwitch:function(t,e){var a=this;return o()(n.a.mark(function t(){var i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.row.topMark="1"===e.row.topMark?"2":"1",t.next=3,a.$post("studyDataToTopOrDeleteList",{serverType:"1",topOrDel:"1"===e.row.topMark?"2":"1",idList:[e.row.id]});case 3:"1000"===(i=t.sent).returnCode?(e.row.topMark="1"===e.row.topMark?"2":"1",a.getTableData(),a.$message.success("“"+e.row.mainTitle+"”已"+("1"===e.row.topMark?"取消":"")+"置顶")):a.$message.error(i.message);case 5:case"end":return t.stop()}},t,a)}))()},toAddDatum:function(t){"文件"===t?this.$router.push({path:"/exam/studyDatum/fileAdd"}):this.$router.push({path:"/exam/studyDatum/audioAdd"})},batchDownload:function(){this.$message.info("开发中")}}},d=(a("3KyF"),a("ZrdR")),m=Object(d.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"study_datum_list"},[a("div",{staticClass:"datum_list_wrapper"},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"标题："}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.mainTitle,callback:function(e){t.$set(t.form,"mainTitle",e)},expression:"form.mainTitle"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.form.publishState,callback:function(e){t.$set(t.form,"publishState",e)},expression:"form.publishState"}},[a("el-option",{attrs:{label:"已发布",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"待发布",value:"2"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"更新时间："}},[a("el-col",{attrs:{span:11}},[a("date-picker",{attrs:{fullWidth:""},model:{value:t.form.staUpdatedTime,callback:function(e){t.$set(t.form,"staUpdatedTime",e)},expression:"form.staUpdatedTime"}})],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),t._v(" "),a("el-col",{attrs:{span:11}},[a("date-picker",{attrs:{fullWidth:"",end:""},model:{value:t.form.endUpdatedTime,callback:function(e){t.$set(t.form,"endUpdatedTime",e)},expression:"form.endUpdatedTime"}})],1)],1)],1)],1),t._v(" "),a("el-row",{staticClass:"search_button_row"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")])],1)],1),t._v(" "),a("div",{staticClass:"table_container"},[a("div",{staticClass:"btn_container"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.toAddDatum("文件")}}},[t._v("新增资料")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.toAddDatum("视频")}}},[t._v("新增音频")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:t.batchDelete}},[t._v("批量删除")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:"置顶",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-value":"2","inactive-value":"1","inactive-color":"#ccc"},on:{change:function(a){t.changeToppingSwitch(a,e)}},model:{value:e.row.topMark,callback:function(a){t.$set(e.row,"topMark",a)},expression:"scope.row.topMark"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"mainTitle",label:"标题","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return["文件"===e.row.fileFormat?a("router-link",{attrs:{to:{path:"/exam/studyDatum/fileDetail",query:{id:e.row.id}}}},[t._v("\n              "+t._s(e.row.mainTitle)+"\n            ")]):a("router-link",{attrs:{to:{path:"/exam/studyDatum/audioDetail",query:{id:e.row.id}}}},[t._v("\n              "+t._s(e.row.mainTitle)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"fileFormat",label:"文件格式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"publishState",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("1"===e.row.publishState?"已发布":"2"===e.row.publishState?"待发布":""))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterTime")(e.row.updatedTime,"YYYY-MM-DD hh:mm")))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"edit_item",on:{click:function(a){t.editTableItem(e)}}},[t._v("编辑")]),t._v(" "),a("span",{staticClass:"del_item",on:{click:function(a){t.delTableItem(e)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination"},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.form.pageNumber,limit:t.form.pageSize},on:{"update:page":function(e){t.$set(t.form,"pageNumber",e)},"update:limit":function(e){t.$set(t.form,"pageSize",e)},pagination:t.paginationChange}})],1)],1)])},[],!1,null,"52176de6",null);m.options.__file="list.vue";e.default=m.exports}}]);