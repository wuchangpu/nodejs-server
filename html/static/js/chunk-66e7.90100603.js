(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-66e7"],{"7QKS":function(e,t,a){"use strict";var r=a("bArh");a.n(r).a},bArh:function(e,t,a){},sOTI:function(e,t,a){"use strict";a.r(t);var r=a("cLjf"),o=a.n(r),i=a("6ZY3"),s=a.n(i),l=a("hDQ3"),n=a.n(l),c={data:function(){return{formData:{appId:"1",infoType:"1",infoTitle:"",typeKey:"",typeValue:"",sourceName:"",sourceUrl:"",noticeType:"",noticeObject:"",isDownload:""},records:[],relus:{infoTitle:[{required:!0,message:"请输入标题",trigger:"blur"},{min:1,max:200,message:"长度在 1 到 200 个字符",trigger:"blur"}],typeKey:[{required:!0,message:"请选择分类",trigger:"change"}],sourceUrl:[{required:!0,message:"请上传文件",trigger:"change"}],noticeType:[{required:!0,message:"请选择",trigger:"change"}],isDownload:[{required:!0,message:"请选择",trigger:"change"}]},nameArr:[],pathArr:[],classify:[],fileList:[]}},created:function(){this.init()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("有信息未填写"),!1;t.add()})},add:function(){var e=this;return n()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("dataInfoAdd",s()({appId:"1",infoType:"1",infoTitle:e.formData.infoTitle,typeKey:e.formData.typeKey,typeValue:e.formData.typeValue,sourceName:e.formData.sourceName,sourceUrl:e.formData.sourceUrl,noticeType:e.formData.noticeType,noticeObject:e.formData.noticeObject?e.formData.noticeObject.join(","):"",isDownload:e.formData.isDownload}));case 2:"1000"===(a=t.sent).returnCode?(e.$message({type:"success",message:"新增成功!"}),e.$router.push("/datum/datumVindcate/list"),console.log("formData",e.formData)):e.$message.error(a.message);case 4:case"end":return t.stop()}},t,e)}))()},abolish:function(){this.$router.go(-1)},getFiles:function(e){console.log("文件val",e),this.nameArr.push(e.fileName),this.pathArr.push(e.filePath),this.formData.sourceName=this.nameArr.join(","),this.formData.sourceUrl=this.pathArr.join(","),console.log("sourceName",this.formData.sourceName),console.log("sourceUrl",this.formData.sourceUrl)},removeFile:function(e){console.log();var t=e.file.name,a=this.formData.sourceName.split(","),r=a.indexOf(t);a.splice(r,1);this.formData.sourceName=a.join(",");var o=e.file.url,i=this.formData.sourceName.split(","),s=i.indexOf(o);i.splice(s,1);this.formData.sourceUrl=i.join(",")},init:function(){var e=this;return n()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDictionaryData(["1009_cxwtfl"]);case 2:a=t.sent,e.records=a[0].dataEntityList,e.classify=e.records.map(function(e){return{label:e.dataValue,value:e.dataKey}});case 5:case"end":return t.stop()}},t,e)}))()},getTypeValue:function(e){this.formData.typeValue=this.classify.find(function(t){return t.value==e}).label,console.log(this.formData.typeValue)},radioClick:function(e,t){this.formData.noticeType!==t&&this.$refs.person.clearCheckbox()}}},u=(a("7QKS"),a("ZrdR")),f=Object(u.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"datumVindcate_add"},[a("div",{staticClass:"datum-add"},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.relus}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"标题:",prop:"infoTitle"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.infoTitle,callback:function(t){e.$set(e.formData,"infoTitle",t)},expression:"formData.infoTitle"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"分类：",prop:"typeKey"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},on:{change:e.getTypeValue},model:{value:e.formData.typeKey,callback:function(t){e.$set(e.formData,"typeKey",t)},expression:"formData.typeKey"}},e._l(e.classify,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"upload-style",attrs:{label:"文件：",prop:"sourceUrl"}},[a("file-upload",{attrs:{limit:1,accept:"application/pdf"},on:{getFiles:e.getFiles,removeFile:e.removeFile}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公开对象：",prop:"noticeType"}},[a("el-radio-group",{model:{value:e.formData.noticeType,callback:function(t){e.$set(e.formData,"noticeType",t)},expression:"formData.noticeType"}},[a("el-radio",{attrs:{label:"1"},nativeOn:{click:function(t){e.radioClick(t,"1")}}},[e._v("全部成员")]),e._v(" "),a("el-radio",{attrs:{label:"2"},nativeOn:{click:function(t){e.radioClick(t,"2")}}},[e._v("指定招生组")]),e._v(" "),a("el-radio",{attrs:{label:"3"},nativeOn:{click:function(t){e.radioClick(t,"3")}}},[e._v("指定角色")]),e._v(" "),a("el-radio",{attrs:{label:"4"},nativeOn:{click:function(t){e.radioClick(t,"4")}}},[e._v("自定义成员")])],1)],1),e._v(" "),a("specified-object",{ref:"person",attrs:{type:e.formData.noticeType},model:{value:e.formData.noticeObject,callback:function(t){e.$set(e.formData,"noticeObject",t)},expression:"formData.noticeObject"}}),e._v(" "),a("el-form-item",{attrs:{label:"是否可下载：",prop:"isDownload"}},[a("el-radio",{attrs:{label:"2"},model:{value:e.formData.isDownload,callback:function(t){e.$set(e.formData,"isDownload",t)},expression:"formData.isDownload"}},[e._v("否")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.formData.isDownload,callback:function(t){e.$set(e.formData,"isDownload",t)},expression:"formData.isDownload"}},[e._v("是")])],1)],1),e._v(" "),a("div",{staticClass:"btn_group"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.submitForm("formData")}}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{type:"submit",size:"medium"},on:{click:e.abolish}},[e._v("取消")])],1)],1)])},[],!1,null,"154604c0",null);f.options.__file="add.vue";t.default=f.exports}}]);